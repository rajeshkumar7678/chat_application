<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Link CDN Script -->
    <script src="https://kit.fontawesome.com/8533c91442.js" crossorigin="anonymous" crossorigin="anonymous" ></script>
    <!-- Link Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
     <!--Link File CSS  -->
     <link rel="stylesheet" href="../css/login.css">

    <title>Login Page Design</title>
  </head>
  <body>
    <div class="center">
        <h1>Login Page</h1>
        <form id="form">
            <div class="txt_field">
                <input id="useremail" type="Email" required />
                <span></span>
                <label>Email</label>
            </div>
          <div class="txt_field">
            <input id="userpassword" type="password" required />
            <span></span>
            <label>Password</label>
          </div>
          <div class="pass">Forgot Password?</div>
  
          <input type="submit" value="Login" />
          <div class="singup_link">Not a member? <a href="./signup.html">Singup</a></div>
        </form>
      </div>
  </body>
  <script>
    let useremail=document.getElementById("useremail")
    
    let userpassword=document.getElementById("userpassword")
    let button=document.getElementById("form")
button.addEventListener("submit", (e) => {
  e.preventDefault();

  let userobj = {
    email: useremail.value,
    password: userpassword.value
  };

  fetch("http://localhost:7678/user/login", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(userobj)
  })
    .then((res) => {
      if (res.redirected) {
        window.location.href = res.url; // Redirect to the specified URL
      } else {
        return res.json(); // Continue processing the response
      }
    })
    .then((response) => {
      // Handle other responses or display a success message
      console.log(response);
    })
    .catch((err) => {
      console.log(err);
    });
});

    
  </script>
</html>
